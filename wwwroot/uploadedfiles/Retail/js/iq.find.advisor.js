	var map,infoWindow,consultantMarkerImage,independentMarkerImage,geocoder,markerCluster;	var markers = [];	if ($.browser.msie && $.browser.version.substr(0,1)<7) {	      var styles = [{        url: 'http://www.irishlife.ie/uploadedImages/Retail/images/m1.gif',        height: 26,        width: 26,        opt_anchor: [13, 0],        opt_textColor: '#ff00ff',        opt_textSize: 10      }, {        url: 'http://www.irishlife.ie/uploadedImages/Retail/images/m2.gif',        height: 27,        width: 27,        opt_anchor: [14, 0],        opt_textColor: '#ff0000',        opt_textSize: 11      }, {        url: 'http://www.irishlife.ie/uploadedImages/Retail/images/m3.gif',        height: 31,        width: 31,        opt_anchor: [15, 0],        opt_textSize: 12      }];}		// Check box listeners	$(document).ready(function () {		initialize();		$('#iibCheckBox').change(function() {			markerCluster.clearMarkers();			infoWindow.close();			addMarkers();		});	});	addMarkers = function() {		markers = [];		consultantMarkerImage = new google.maps.MarkerImage('http://www.irishlife.ie/uploadedImages/retail/img/map.person.icon.png');		independentMarkerImage = new google.maps.MarkerImage('http://www.irishlife.ie/uploadedImages/retail/img/map.person2.icon.png');				for (var i = 0; i < consultantData.length; i++) {			thisAdviserData=consultantData[i];						var latLng = new google.maps.LatLng(thisAdviserData.locations[0].latitude,			thisAdviserData.locations[0].longitude);						var marker = new google.maps.Marker({			position: latLng,			icon: consultantMarkerImage			});						var fn = markerClickFunction(thisAdviserData, latLng, '1',marker);			google.maps.event.addListener(marker, 'click', fn);			markers.push(marker);		}				// iibCheckBox 		if ($('#iibCheckBox').is(":checked"))		{			for (var i = 0; i < independentAdvisorData.length; i++) {				thisAdviserData=independentAdvisorData[i];				var latLng = new google.maps.LatLng(thisAdviserData.latitude,thisAdviserData.longitude);				var marker = new google.maps.Marker({					position: latLng,					icon: independentMarkerImage				});								var fn = markerClickFunction(thisAdviserData, latLng, '2', marker);				google.maps.event.addListener(marker, 'click', fn);				markers.push(marker);			}		}				infoWindow = new google.maps.InfoWindow();		markerCluster = new MarkerClusterer(map, markers, {			maxZoom: 13,			gridSize: 40,          styles: styles        });}	  	  	function initialize() {        var center = new google.maps.LatLng(53.35055131839989, -6.317138671875);		geocoder = new google.maps.Geocoder();         map = new google.maps.Map(document.getElementById('map'), {          zoom: 7,          center: center,          mapTypeId: google.maps.MapTypeId.ROADMAP        }); 		addMarkers();      }	  	  markerClickFunction = function(advisorData, latlng, infoID, marker) {  return function(e) {      e.cancelBubble = true;    e.returnValue = false;    if (e.stopPropagation) {      e.stopPropagation();      e.preventDefault();    }	var trackName='';		if (infoID == '2')	{		var independentAdvisorInfo = '<div class="mapInfoWindow">'+		'<div class="mapInfoWindowText"><h2><u>Financial Broker</u></h2>' +		'<h1><b> '+advisorData['name']+'</b></h1> '+		'<h3> '+advisorData['address1']+'</h3>'+		'<h3><b>Phone:</b> '+advisorData['telephone']+'</h3> '+		'<h3><b>Email:</b> <a href="mailto:'+advisorData['email']+'">'+advisorData['email']+'</a></h3>';		if (advisorData['web'] != '')		{			independentAdvisorInfo = independentAdvisorInfo + '<h3><b>Web:</b> <a href="'+advisorData['web']+'" target="_blank">'+advisorData['web']+'</a></h3>';		}			independentAdvisorInfo = independentAdvisorInfo +		'</div>'+		'</div>';			infoWindow.setContent(independentAdvisorInfo);			trackName=advisorData['name'];	}	else	{		var ILAdvisorInfo = '<div class="mapInfoWindow">'+		'<div class="mapInfoWindowText"><h2><u>Irish Life Qualified Financial Advisor</u></h2>' +		'<h1><b> '+advisorData['firstname']+' '+advisorData['lastname']+'</b></h1>'+		'<h3><b>Phone:</b> '+advisorData['phone']+'<br/> '+		'<b>Fax:</b> '+advisorData['fax']+'<br/> '+		'<b>Email:</b> <a href="mailto:'+advisorData['email']+'">'+advisorData['email']+'</a></h3>'+		'</div>'+		'</div>';		infoWindow.setContent(ILAdvisorInfo);		trackName=advisorData['firstname'] + ' ' + advisorData['lastname'];	}	if (_gaq) _gaq.push(['_trackPageview','/advice/find-broker-'+trackName]);	     infoWindow.setPosition(latlng);	infoWindow.open(map,marker);			  };          };function clearOverlays(myArr) {  if (myArr) {    for (i in myArr) {      myArr[i].setMap(null);    }  }    clearOverlays(markers);markerCluster.clearMarkers();}function countyChange() {	var mapStreetValues = $('#advisorMapStreet').val();	var mapTownValues = $('#advisorMapTown').val();	var mapCountyValues = $('#mapOptionsCounty').val();	if (mapTownValues=="" && mapCountyValues=="")	{		mapTownValues = "Dublin";		mapCountyValues="dublin";	}	var address = mapTownValues+",co."+mapCountyValues+", ireland"; 	geocoder.geocode( { 'address': address}, function(results, status) {	if (status == google.maps.GeocoderStatus.OK) {		var myLatlngAddress = new google.maps.LatLng(results[0].geometry.location);				map.setCenter(results[0].geometry.location);		map.setZoom(10);			} 	else{		alert("Sorry, we could not find the address for the following reason: " + status);		}	}); }